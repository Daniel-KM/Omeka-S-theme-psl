<div id="content" role="main">
    <div id="search-form-wrapper">
        <div id="search-form">
            <?php echo $this->SearchForm(); ?>
        </div>
    </div>

    <?php
        $itemSets = $this->api()->search('item_sets', [
            'limit' => 8,
            'sort_by' => 'created',
            'sort_order' => 'desc',
        ])->getContent();
    ?>
    <?php if (!empty($itemSets)): ?>
        <div id="collections">
            <header>
                <h2>Collections</h2>
                <?php $collectionsUrl = $this->url('site/resource', [
                    'controller' => 'item-set',
                    'action' => 'browse',
                ], true); ?>
                <div class="ruler"></div>
                <a href="<?php echo $collectionsUrl; ?>"><img src="/themes/psl/asset/images/bullet.svg"/> Toutes les collections</a>
            </header>
            <main>
                <?php foreach ($itemSets as $itemSet): ?>
                    <div class="collection">
                        <?php $media = $itemSet->primaryMedia(); ?>
                        <a <?php if ($media): ?>style="background-image: url(<?php echo $media->thumbnailUrl('large'); ?>)"<?php endif; ?> href="<?php echo $this->url('search-page-' . $this->themeSetting('search_page_id'), [], ['query' => ['itemSet' => ['ids' => [$itemSet->id()]]]], true); ?>">
                            <div class="collection-title">
                                <div>
                                    <span><?php echo $itemSet->displayTitle(); ?></span>
                                </div>
                            </div>
                        </a>
                    </div>
                <?php endforeach; ?>
            </main>
        </div>
    <?php endif; ?>
</div>
